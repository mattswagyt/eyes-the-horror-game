-- Roblox Lua Script for "Eyes the Horror Game - Mansion" (By BMF)
-- Script handles a draggable UI with multiple functionalities

-- Variables
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local StarterGui = game:GetService("StarterGui")
local UIS = game:GetService("UserInputService")
local BadgeService = game:GetService("BadgeService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local workspace = game:GetService("Workspace")

-- Create UI Elements
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local ErrorLog = Instance.new("TextLabel")
local UIListLayout = Instance.new("UIListLayout")

-- UI Properties
ScreenGui.Parent = PlayerGui
ScreenGui.ResetOnSpawn = false
ScreenGui.Name = "EyesUI"

MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Size = UDim2.new(0, 300, 0, 400)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Visible = true

Title.Parent = MainFrame
Title.Text = "Eyes the Horror Game - Mansion (By BMF)"
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18

ErrorLog.Parent = MainFrame
ErrorLog.Text = "Error Log: None"
ErrorLog.Size = UDim2.new(1, 0, 0, 30)
ErrorLog.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ErrorLog.TextColor3 = Color3.fromRGB(255, 85, 85)
ErrorLog.Font = Enum.Font.SourceSans
ErrorLog.TextSize = 14
ErrorLog.TextWrapped = true
ErrorLog.TextYAlignment = Enum.TextYAlignment.Top

UIListLayout.Parent = MainFrame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Toggle UI with Delete key
UIS.InputBegan:Connect(function(input, processed)
    if not processed and input.KeyCode == Enum.KeyCode.Delete then
        MainFrame.Visible = not MainFrame.Visible
    end
end)

-- Function to Create Buttons
local function createButton(name, callback)
    local Button = Instance.new("TextButton")
    Button.Parent = MainFrame
    Button.Text = name
    Button.Size = UDim2.new(1, 0, 0, 30)
    Button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.Font = Enum.Font.SourceSans
    Button.TextSize = 16
    Button.MouseButton1Click:Connect(function()
        pcall(callback)
    end)
    return Button
end

-- âœ… Notification when script loads
StarterGui:SetCore("SendNotification", {
    Title = "Eyes Script Loaded!";
    Text = "All features are ready.";
    Duration = 10;
})

-- Buttons
createButton("Infinite Yield", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

createButton("Dex Explorer", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/infyiff/backup/main/dex.lua"))()
end)

-- Full Bright Function
createButton("Full Bright", function()
    Lighting.Brightness = 5
    Lighting.ClockTime = 14
    Lighting.FogEnd = 100000
    Lighting.GlobalShadows = false
    Lighting.OutdoorAmbient = Color3.new(1, 1, 1)
end)

-- Money Bags ESP
createButton("Money Bag ESP", function()
    local bagsRoot = workspace:FindFirstChild("Map") 
        and workspace.Map:FindFirstChild("Bags")
    if not bagsRoot then return end

    for i = 0, 2 do
        local floorFolder = bagsRoot:FindFirstChild("Floor" .. i)
        if floorFolder then
            for _, bag in ipairs(floorFolder:GetChildren()) do
                if bag:IsA("MeshPart") and bag.Name == "Sack" and not bag:FindFirstChild("ESPHighlight") then
                    local esp = Instance.new("Highlight")
                    esp.Name = "ESPHighlight"
                    esp.Adornee = bag
                    esp.FillTransparency = 1
                    esp.OutlineColor = Color3.fromRGB(0,255,0)
                    esp.OutlineTransparency = 0
                    esp.Parent = bag
                end
            end
        end
    end

    print("Money Bag ESP activated!")
end)

-- Eyes ESP
createButton("Eyes ESP", function()
    local eyesRoot = workspace:FindFirstChild("Map") 
        and workspace.Map:FindFirstChild("Eyes")
    if not eyesRoot then return end

    for i = 0, 2 do
        local floorFolder = eyesRoot:FindFirstChild("Floor" .. i)
        if floorFolder then
            for _, eye in ipairs(floorFolder:GetChildren()) do
                if eye:IsA("MeshPart") and eye.Name == "Eye" and not eye:FindFirstChild("ESPHighlight") then
                    local esp = Instance.new("Highlight")
                    esp.Name = "ESPHighlight"
                    esp.Adornee = eye
                    esp.FillTransparency = 1
                    esp.OutlineColor = Color3.fromRGB(0,0,255)
                    esp.OutlineTransparency = 0
                    esp.Parent = eye
                end
            end
        end
    end

    print("Eyes ESP activated!")
end)

-- Collect Money Bags
createButton("Collect Money Bags", function()
    local bagsRoot = workspace:FindFirstChild("Map") 
        and workspace.Map:FindFirstChild("Bags")
    if not bagsRoot then return end

    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local clonedCount = 0
    for i = 0, 2 do
        local floorFolder = bagsRoot:FindFirstChild("Floor" .. i)
        if floorFolder then
            for _, bag in ipairs(floorFolder:GetChildren()) do
                if bag:IsA("MeshPart") and bag.Name == "Sack" then
                    local newBag = bag:Clone()
                    newBag.Parent = workspace
                    newBag.CFrame = hrp.CFrame

                    clonedCount += 1
                    if clonedCount >= 30 then return end
                end
            end
        end
    end
end)

-- Collect Eyes
createButton("Collect Eyes", function()
    local eyesRoot = workspace:FindFirstChild("Map")
        and workspace.Map:FindFirstChild("Eyes")
    if not eyesRoot then return end

    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local clonedCount = 0
    for i = 0, 2 do
        local floorFolder = eyesRoot:FindFirstChild("Floor" .. i)
        if floorFolder then
            for _, eye in ipairs(floorFolder:GetChildren()) do
                if eye:IsA("MeshPart") and eye.Name == "Eye" then
                    local newEye = eye:Clone()
                    newEye.Parent = workspace
                    newEye.CFrame = hrp.CFrame

                    clonedCount += 1
                    if clonedCount >= 20 then return end
                end
            end
        end
    end
end)

-- Collect Basement Key
createButton("Collect Basement Key", function()
    local key = workspace:FindFirstChild("Map")
        and workspace.Map:FindFirstChild("Keys")
        and workspace.Map.Keys:FindFirstChild("Key")
    if not key then return end

    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local newKey = key:Clone()
    newKey.Parent = workspace
    newKey.CFrame = hrp.CFrame + Vector3.new(0,3,0)
end)

-- Teleport to Spawn
createButton("Teleport to Spawn", function()
    local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    local tpPart = workspace:FindFirstChild("TpPartMansion")
    if hrp and tpPart then
        hrp.CFrame = tpPart.CFrame + Vector3.new(9, -8, 17)
    end
end)

-- Collect All Badges
createButton("Collect All Badges", function()
    local badges = {
        ["Welcome to Eyes the Horror Game!"] = 2124689279;
        ["Meet the Owner"] = 2124689337;
        ["Meet our Admins"] = 2149047206;
        ["Meet our Mods"] = 2154060276;
        ["This is where it starts"] = 2129596478;
        Orientating = 2129596584;
        ["First of many"] = 2129596549;
        ["First eye"] = 2129596552;
        ["A key"] = 2129596563;
        ["Unlock the basement"] = 2129596566;
        Chased = 2129596468;
        Hidden = 2129596473;
        ["Almost there"] = 2129596594;
        ["Not found"] = 2129596622;
        Escaped = 2129596458;
        ["Eye collector"] = 2129596555;
        Unlucky = 2129596544;
        Beginning = 2129596524;
        ["Professional stealer"] = 2129596530;
        ["Ultimate stealer"] = 2129596537;
        Untouchable = 2129596541;
        ["Halloween Mode (EVENT)"] = 699751137093635;
    }

    for name, id in pairs(badges) do
        local success, alreadyOwn = pcall(function()
            return BadgeService:UserHasBadgeAsync(LocalPlayer.UserId, id)
        end)
        if success and not alreadyOwn then
            pcall(function()
                BadgeService:AwardBadge(LocalPlayer.UserId, id)
            end)
        end
    end

    print("All badges awarded (or already owned)!")
end)
